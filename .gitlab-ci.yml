image: node:8-alpine

cache:
  paths:
  - bower_components
  - node_modules

build:
  script:
  - npm install -g bower
  - bower install --allow-root
  - npm install
  - npm run build
  - cd build/
  - mv langs plugins skins themes hooks.php jquery.tinymce.min.js tinymce.min.js ../
  - cd ../
  artifacts:
    paths:
    - langs
    - plugins
    - skins
    - themes
    - hooks.php
    - jquery.tinymce.min.js
    - tinymce.min.js
